
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kotest test framework for Kotlin.">
      
      
        <link rel="canonical" href="https://kotest.io/listeners/">
      
      
        <meta name="author" content="Kotest organization">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Listeners - Kotest Test Framework</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab28b872.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Heebo:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Heebo",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-177425497-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#listeners" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://kotest.io" title="Kotest Test Framework" class="md-header-nav__button md-logo" aria-label="Kotest Test Framework">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Kotest Test Framework
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Listeners
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/kotest/kotest/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Kotest
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://kotest.io" title="Kotest Test Framework" class="md-nav__button md-logo" aria-label="Kotest Test Framework">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    Kotest Test Framework
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/kotest/kotest/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    Kotest
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Overview
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Overview" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../quick_start/" class="md-nav__link">
      Quick start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Framework
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Framework" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../styles/" class="md-nav__link">
      Styles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intellij/" class="md-nav__link">
      Intellij plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensions/" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Listeners
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Listeners
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testlistener" class="md-nav__link">
    TestListener
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projectlistener" class="md-nav__link">
    ProjectListener
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-a-listener" class="md-nav__link">
    How to use a Listener
  </a>
  
    <nav class="md-nav" aria-label="How to use a Listener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsl-methods" class="md-nav__link">
    DSL Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsl-methods-with-functions" class="md-nav__link">
    DSL methods with functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overriding-callback-functions-in-a-spec" class="md-nav__link">
    Overriding callback functions in a Spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standalone-listener-instances" class="md-nav__link">
    Standalone Listener instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-examples" class="md-nav__link">
    Real Examples
  </a>
  
    <nav class="md-nav" aria-label="Real Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-out-listener" class="md-nav__link">
    System Out Listener
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timer-listener" class="md-nav__link">
    Timer Listener
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_driven_testing/" class="md-nav__link">
      Data driven testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test_ordering/" class="md-nav__link">
      Test ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spec_ordering/" class="md-nav__link">
      Spec ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conditional_evaluation/" class="md-nav__link">
      Conditional evaluation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../isolation_mode/" class="md-nav__link">
      Isolation mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../timeout/" class="md-nav__link">
      Timeouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tags/" class="md-nav__link">
      Tags
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test_case_config/" class="md-nav__link">
      Test Case Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nondeterministic_testing/" class="md-nav__link">
      Nondeterministic testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test_factories/" class="md-nav__link">
      Test factories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../project_config/" class="md-nav__link">
      Project config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tempfile/" class="md-nav__link">
      Temporary Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../autoclose/" class="md-nav__link">
      Autoclose
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mocks/" class="md-nav__link">
      Mocks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mpp/" class="md-nav__link">
      Mpp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" class="md-nav__link">
      Plugins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Assertions
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Assertions" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Assertions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../assertions/" class="md-nav__link">
      Assertions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matchers/" class="md-nav__link">
      Matchers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matchers/core/" class="md-nav__link">
      Core Matchers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matchers/arrow/" class="md-nav__link">
      Arrow Matchers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matchers/ktor/" class="md-nav__link">
      Ktor Matchers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../matchers/json/" class="md-nav__link">
      Json Matchers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inspectors/" class="md-nav__link">
      Inspectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../clues/" class="md-nav__link">
      Clues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Property Testing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Property Testing" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Property Testing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../property_testing/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../property_ops/" class="md-nav__link">
      Generator Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../property_generators/" class="md-nav__link">
      List of Generators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom_gens/" class="md-nav__link">
      Custom Generators
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/kotest/kotest/issues" class="md-nav__link">
      Issues
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      More
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="More" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        More
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../blogs/" class="md-nav__link">
      Blogs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../third_party_integrations/" class="md-nav__link">
      Third party integrations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#testlistener" class="md-nav__link">
    TestListener
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projectlistener" class="md-nav__link">
    ProjectListener
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-a-listener" class="md-nav__link">
    How to use a Listener
  </a>
  
    <nav class="md-nav" aria-label="How to use a Listener">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dsl-methods" class="md-nav__link">
    DSL Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dsl-methods-with-functions" class="md-nav__link">
    DSL methods with functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overriding-callback-functions-in-a-spec" class="md-nav__link">
    Overriding callback functions in a Spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standalone-listener-instances" class="md-nav__link">
    Standalone Listener instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-examples" class="md-nav__link">
    Real Examples
  </a>
  
    <nav class="md-nav" aria-label="Real Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-out-listener" class="md-nav__link">
    System Out Listener
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timer-listener" class="md-nav__link">
    Timer Listener
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kotest/kotest/edit/master/docs/listeners.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="listeners">Listeners</h1>
<p>It is a common requirement to execute code before or after tests or specs. For instance, to start (or reset) and shutdown an embedded database required by a test.</p>
<p>Kotest provides multiple callbacks into the test lifecycle which are used for this purpose.</p>
<h2 id="testlistener">TestListener</h2>
<p>The main interface is <em>TestListener</em>. The following sections describe the callbacks available on this interface.</p>
<table>
<thead>
<tr>
<th>Callback</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>beforeContainer</td>
<td>Invoked directly before each test with type <code>TestType.Container</code> is executed, with the <code>TestCase</code> instance as a parameter. If the test is marked as ignored / disabled / inactive, then this callback won't be invoked.</td>
</tr>
<tr>
<td>afterContainer</td>
<td>Invoked immediately after a <code>TestCase</code> with type <code>TestType.Container</code> has finished, with the <code>TestResult</code> of that test. If a test case was skipped (ignored / disabled / inactive) then this callback will not be invoked for that particular test case.<br/><br/>The callback will execute even if the test fails.</td>
</tr>
<tr>
<td>beforeEach</td>
<td>Invoked directly before each test with type <code>TestType.Test</code> is executed, with the <code>TestCase</code> instance as a parameter. If the test is marked as ignored / disabled / inactive, then this callback won't be invoked.</td>
</tr>
<tr>
<td>afterEach</td>
<td>Invoked immediately after a <code>TestCase</code> with type <code>TestType.Test</code> has finished, with the <code>TestResult</code> of that test. If a test case was skipped (ignored / disabled / inactive) then this callback will not be invoked for that particular test case.<br/><br/>The callback will execute even if the test fails.</td>
</tr>
<tr>
<td>beforeAny</td>
<td>Invoked directly before each test with any <code>TestType</code> is executed, with the <code>TestCase</code> instance as a parameter. If the test is marked as ignored / disabled / inactive, then this callback won't be invoked.</td>
</tr>
<tr>
<td>afterAny</td>
<td>Invoked immediately after a <code>TestCase</code> with any <code>TestType</code> has finished, with the <code>TestResult</code> of that test. If a test case was skipped (ignored / disabled / inactive) then this callback will not be invoked for that particular test case.<br/><br/>The callback will execute even if the test fails.</td>
</tr>
<tr>
<td>beforeTest</td>
<td>Invoked directly before each test is executed with the <code>TestCase</code> instance as a parameter. If the test is marked as ignored / disabled / inactive, then this callback won't be invoked.<br/><br/>This callback has the same behavior as <code>beforeAny</code>.</td>
</tr>
<tr>
<td>afterTest</td>
<td>Invoked immediately after a <code>TestCase</code> has finished with the <code>TestResult</code> of that test. If a test case was skipped (ignored / disabled / inactive) then this callback will not be invoked for that particular test case.<br/><br/>The callback will execute even if the test fails.<br/><br/>This callback has the same behavior as <code>afterAny</code>.</td>
</tr>
<tr>
<td>beforeSpec</td>
<td>Invoked after the Engine instantiates a spec to be used as part of a test execution.<br/><br/>The callback is provided with the <code>Spec</code> instance that the test will be executed under.<br/><br/>If a spec is instantiated multiple times - for example, if <code>InstancePerTest</code> or <code>InstancePerLeaf</code> isolation modes are used, then this callback will be invoked for each instance created, just before the first test (or only test) is executed for that spec.<br/><br/>This callback should be used if you need to perform setup each time a new spec instance is created.<br/><br/>If you simply need to perform setup once per class file, then use prepareSpec. This callback runs before any <code>beforeTest</code> functions are invoked.<br/><br/> When running in the default <code>SingleInstance</code> isolation mode, then this callback and <code>prepareSpec</code> are functionally the same since all tests will run in the same spec instance.</td>
</tr>
<tr>
<td>afterSpec</td>
<td>Is invoked after the <code>TestCase</code>s that are part of a particular spec instance have completed.<br/><br/>If a spec is instantiated multiple times - for example, if <code>InstancePerTest</code> or <code>InstancePerLeaf</code> isolation modes are used, then this callback will be invoked for each instantiated spec, after the tests that are applicable to that spec instance have returned.<br/><br/>This callback should be used if you need to perform cleanup after each individual spec instance. If you need to perform cleanup once per class file, then use <code>finalizeSpec.</code><br/><br/>This callback runs after any <code>afterTest</code> callbacks have been invoked.<br/><br/>When running in the default <code>SingleInstance</code> isolation mode, then this callback and <code>finalizeSpec</code> are functionally the same since all tests will run in the same spec instance.</td>
</tr>
<tr>
<td>prepareSpec</td>
<td>Called once per spec, when the engine is preparing to execute the tests for that spec. The <code>KClass</code> instance of the spec is provided as a parameter.<br/><br/>Regardless of how many times the spec is instantiated, for example, if <code>InstancePerTest</code> or <code>InstancePerLeaf</code> isolation modes are used, this callback will only be invoked once. If there are no active tests in a spec, then this callback will still be invoked.<br/><br/>When running in the default <code>SingleInstance</code> isolation mode, then this callback and <code>beforeSpec</code> are functionally the same since all tests will run in the same spec instance.</td>
</tr>
<tr>
<td>finalizeSpec</td>
<td>Called once per <code>Spec</code>, after all tests have completed for that spec.<br/><br/>Regardless of how many times the spec is instantiated, for example, if <code>InstancePerTest</code> or <code>InstancePerLeaf</code> isolation modes are used, this callback will only be invoked once.<br/><br/>The results parameter contains every <code>TestCase</code>, along with the result of that test, including tests that were ignored (which will have a <code>TestResult</code> that has <code>TestStatus.Ignored</code>).<br/><br/>When running in the default <code>SingleInstance</code> isolation mode, then this callback and <code>afterSpec</code> are functionally the same since all tests will run in the same spec instance.</td>
</tr>
<tr>
<td>beforeInvocation</td>
<td>Invoked before each 'run' of a test, with a flag indicating the iteration number. This callback is useful if you have set a test to have multiple invocations via config and want to do some setup / teardown between runs.<br/><br/>If you are running a test with the default single invocation then this callback is effectively the same as <code>beforeTest</code>.<br/><br/><em>Note: If you have set multiple invocations _and</em> multiple threads, then these callbacks will be invoked concurrently._</td>
</tr>
<tr>
<td>afterInvocation</td>
<td>Invoked after each 'run' of a test, with a flag indicating the iteration number. This callback is useful if you have set a test to have multiple invocations via config and want to do some setup / teardown between runs.<br/><br/>If you are running a test with the default single invocation then this callback is effectively the same as <code>afterTest</code>.<br/><br/><em>Note: If you have set multiple invocations _and</em> multiple threads, then these callbacks will be invoked concurrently._</td>
</tr>
</tbody>
</table>
<h2 id="projectlistener">ProjectListener</h2>
<p>The other listener interface is <code>ProjectListener</code> which defines two callbacks.</p>
<table>
<thead>
<tr>
<th>Callback</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>beforeProject</td>
<td>This callback is invoked once before any spec discovery and execution takes place.</td>
</tr>
<tr>
<td>afterProject</td>
<td>This callback is invoked once after all specs have completed. This callback is executed even if there are errors in specs / test cases.</td>
</tr>
</tbody>
</table>
<h2 id="how-to-use-a-listener">How to use a Listener</h2>
<p>There are several ways to use the methods in a listener.</p>
<h4 id="dsl-methods">DSL Methods</h4>
<p>The first and simplest, is to use the DSL methods available inside a Spec which create and register a <code>TestListener</code> for you. For example, we can invoke <code>beforeTest</code> or <code>afterTest</code> (and others) directly alongside our tests.</p>
<pre><code class="language-kotlin">class TestSpec : WordSpec({
   beforeTest {
     println(&quot;Starting a test $it&quot;)
   }
   afterTest { (test, result) -&gt;
     println(&quot;Finished spec with result $result&quot;)
   }
   &quot;this test&quot; should {
      &quot;be alive&quot; {
        println(&quot;Johnny5 is alive!&quot;)
      }
   }
})
</code></pre>
<p>Behind the scenes, these DSL methods will create an instance of <code>TestListener</code>, overriding the appropriate functions, and ensuring that this test listener is registered to run.</p>
<p>You can use <code>afterProject</code> as a DSL method which will create an instance of <code>ProjectListener</code>, but there is no <code>beforeProject</code> because by the time the framework is at this stage of detecting a spec, the project has already started!</p>
<h4 id="dsl-methods-with-functions">DSL methods with functions</h4>
<p>Since these DSL methods accept functions, we can pull out logic to a function and re-use it in several places. The <code>BeforeTest</code> type used on the function definition is an alias
to <code>suspend (TestCase) -&gt; Unit</code> to keep things simple. There are aliases for the types of each of the callbacks.</p>
<pre><code class="language-kotlin">val startTest: BeforeTest = {
   println(&quot;Starting a test $it&quot;)
}

class TestSpec : WordSpec({

   // used once
   beforeTest(startTest)

   &quot;this test&quot; should {
      &quot;be alive&quot; {
         println(&quot;Johnny5 is alive!&quot;)
      }
   }
})

class OtherSpec : WordSpec({

   // used twice
   beforeTest(startTest)

   &quot;this test&quot; should {
      &quot;fail&quot; {
         fail(&quot;boom&quot;)
      }
   }
})
</code></pre>
<h4 id="overriding-callback-functions-in-a-spec">Overriding callback functions in a Spec</h4>
<p>The second, related, method is to override the callback functions in the Spec. This is essentially just a variation on the first method.</p>
<pre><code class="language-kotlin">class TestSpec : WordSpec() {
    override fun beforeTest(testCase: TestCase) {
        println(&quot;Starting a test $testCase&quot;)
    }

    init {
        &quot;this test&quot; should {
            &quot;be alive&quot; {
                println(&quot;Johnny5 is alive!&quot;)
            }
        }
    }
}
</code></pre>
<h4 id="standalone-listener-instances">Standalone Listener instances</h4>
<p>The next method is to create a standalone implementation of the <code>TestListener</code> or <code>ProjectListener</code> interface and register it.</p>
<p>This is useful for <code>TestListener</code>s if you want to reuse a listener that has several dependant functions (such as starting and stopping a resource).</p>
<pre><code class="language-kotlin">class MyTestListener : TestListener {
   override suspend fun beforeSpec(spec:Spec) {
      // power up kafka
   }
   override suspend fun afterSpec(spec: Spec) {
      // shutdown kafka
   }
}


class TestSpec : WordSpec({
    listener(MyTestListener())
    // tests here
})
</code></pre>
<p>Any listeners registered directly inside a <code>Spec</code> will be used for all tests in that spec (including <a href="testfactories.md">test factories</a> and nested tests).</p>
<p>Maybe you want a <code>TestListener</code> to run for every spec in the entire project. To do that, you can either mark the listener with <code>@AutoScan</code>, or you can register the listener via project config.
For more information on this see <a href="#project-config">ProjectConfig</a>.</p>
<p>Instances of <code>ProjectListener</code> must be registered using <code>@AutoScan</code> or using project config level, since the <code>beforeProject</code> callback needs to be registered and executed any spec discovery begins.</p>
<p>An example of <code>@Autoscan</code> on a project listener:</p>
<pre><code class="language-kotlin">@AutoScan
object MyProjectListener : ProjectListener {
  override suspend fun beforeProject() {
    println(&quot;Project starting&quot;)
  }
  override suspend fun afterProject() {
    println(&quot;Project complete&quot;)
  }
}
</code></pre>
<h2 id="real-examples">Real Examples</h2>
<h4 id="system-out-listener">System Out Listener</h4>
<p>A real example of a listener in example, is our <code>NoSystemOutListener</code> which throws an error if any output is written to standard out.</p>
<pre><code class="language-kotlin">class MyTestSpec : DescribeSpec({

    listener(NoSystemOutListener)

    describe(&quot;All these tests should not write to standard out&quot;) {
        it(&quot;silence in the court&quot;) {
          println(&quot;boom&quot;) // failure
        }
    }
})
</code></pre>
<h4 id="timer-listener">Timer Listener</h4>
<p>Another example would be if we wanted to log the time taken for each test case. We can do this by using the <code>beforeTest</code> and <code>afterTest</code> functions
 as follows:</p>
<pre><code class="language-kotlin">object TimerListener : TestListener {

  var started = 0L

  override fun beforeTest(testCase: TestCase): Unit {
    started = System.currentTimeMillis()
  }

  override fun afterTest(testCase: TestCase, result: TestResult): Unit {
    println(&quot;Duration of ${testCase.description} = &quot; + (System.currentTimeMillis() - started))
  }
}
</code></pre>
<p>Then we can register like so:</p>
<pre><code class="language-kotlin">class MyTestClass : FunSpec({
  listeners(TimerListener)
  // tests here
})
</code></pre>
<p>Or we could register it project wide:</p>
<pre><code class="language-kotlin">object MyConfig : AbstractProjectConfig() {
    override fun listeners(): List&lt;Listener&gt; = listOf(TimerListener)
}
</code></pre>
<p>These functions will now be invoked for every test case inside the <code>MyTestClass</code> test class. Maybe you want
 this listener to run for every test in the entire project. To do that, you would register the listener with
 the project config singleton. For more information on this see <a href="../project_config/">ProjectConfig</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../extensions/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Extensions
              </div>
            </div>
          </a>
        
        
          <a href="../data_driven_testing/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Data driven testing
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 Kotest Team
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://kotlinlang.slack.com/?redir=%2Farchives%2FCT0G9SD7Z" target="_blank" rel="noopener" title="kotlinlang.slack.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/kotest/kotest" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['search.highlight', 'tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>